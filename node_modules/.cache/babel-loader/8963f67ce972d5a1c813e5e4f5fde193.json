{"ast":null,"code":"import { ADD_TO_CART, DELETE_FROM_CART, UPDATE_CART_UNITS } from \"../types/CartTypes\";\nexport default function cartReducer(state = [], action = {}) {\n  switch (action.type) {\n    case ADD_TO_CART:\n      let existingIndex = findProductIndex(state, action.payload.id);\n\n      if (existingIndex !== -1) {\n        state[existingIndex].units += 1;\n        return state.concat([]);\n      }\n\n      return state.concat(action.payload);\n\n    case UPDATE_CART_UNITS:\n      let existingItemIndex = findProductIndex(state, action.payload.id);\n\n      if (state[existingItemIndex].units === 0 && action.payload.units === -1) {\n        return [...state.slice(0, existingItemIndex), ...state.slice(existingItemIndex + 1)];\n      }\n\n      state[existingItemIndex].units += action.payload.units;\n      return state.concat([]);\n\n    case DELETE_FROM_CART:\n      let indexToDel = findProductIndex(state, action.payload.id);\n      return [...state.slice(0, indexToDel), ...state.slice(indexToDel + 1)];\n  }\n\n  function findProductIndex(products, id) {\n    return products.findIndex(p => p.id === id);\n  }\n\n  return state;\n}","map":{"version":3,"sources":["C:/Users/Vlad/Desktop/webLabs-lab10/src/components/redux/reducers/CartReducer.js"],"names":["ADD_TO_CART","DELETE_FROM_CART","UPDATE_CART_UNITS","cartReducer","state","action","type","existingIndex","findProductIndex","payload","id","units","concat","existingItemIndex","slice","indexToDel","products","findIndex","p"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,gBAAtB,EAAwCC,iBAAxC,QAAgE,oBAAhE;AAEA,eAAe,SAASC,WAAT,CAAqBC,KAAK,GAAC,EAA3B,EAA+BC,MAAM,GAAC,EAAtC,EAA0C;AACrD,UAAOA,MAAM,CAACC,IAAd;AACI,SAAKN,WAAL;AACI,UAAIO,aAAa,GAAGC,gBAAgB,CAACJ,KAAD,EAAQC,MAAM,CAACI,OAAP,CAAeC,EAAvB,CAApC;;AACA,UAAIH,aAAa,KAAK,CAAC,CAAvB,EAA0B;AACtBH,QAAAA,KAAK,CAACG,aAAD,CAAL,CAAqBI,KAArB,IAA8B,CAA9B;AACA,eAAOP,KAAK,CAACQ,MAAN,CAAa,EAAb,CAAP;AACH;;AACD,aAAOR,KAAK,CAACQ,MAAN,CAAaP,MAAM,CAACI,OAApB,CAAP;;AAEJ,SAAKP,iBAAL;AACI,UAAIW,iBAAiB,GAAGL,gBAAgB,CAACJ,KAAD,EAAQC,MAAM,CAACI,OAAP,CAAeC,EAAvB,CAAxC;;AAEA,UAAIN,KAAK,CAACS,iBAAD,CAAL,CAAyBF,KAAzB,KAAmC,CAAnC,IAAwCN,MAAM,CAACI,OAAP,CAAeE,KAAf,KAAyB,CAAC,CAAtE,EAAyE;AACrE,eAAO,CAAC,GAAGP,KAAK,CAACU,KAAN,CAAY,CAAZ,EAAeD,iBAAf,CAAJ,EAAuC,GAAGT,KAAK,CAACU,KAAN,CAAYD,iBAAiB,GAAC,CAA9B,CAA1C,CAAP;AACH;;AACDT,MAAAA,KAAK,CAACS,iBAAD,CAAL,CAAyBF,KAAzB,IAAkCN,MAAM,CAACI,OAAP,CAAeE,KAAjD;AACA,aAAOP,KAAK,CAACQ,MAAN,CAAa,EAAb,CAAP;;AAEJ,SAAKX,gBAAL;AACI,UAAIc,UAAU,GAAGP,gBAAgB,CAACJ,KAAD,EAAQC,MAAM,CAACI,OAAP,CAAeC,EAAvB,CAAjC;AACA,aAAO,CAAC,GAAGN,KAAK,CAACU,KAAN,CAAY,CAAZ,EAAeC,UAAf,CAAJ,EAAgC,GAAGX,KAAK,CAACU,KAAN,CAAYC,UAAU,GAAC,CAAvB,CAAnC,CAAP;AApBR;;AAuBA,WAASP,gBAAT,CAA0BQ,QAA1B,EAAoCN,EAApC,EAAwC;AACpC,WAAOM,QAAQ,CAACC,SAAT,CAAoBC,CAAD,IAAOA,CAAC,CAACR,EAAF,KAASA,EAAnC,CAAP;AACH;;AAED,SAAON,KAAP;AACH","sourcesContent":["import { ADD_TO_CART, DELETE_FROM_CART, UPDATE_CART_UNITS} from \"../types/CartTypes\";\n\nexport default function cartReducer(state=[], action={}) {\n    switch(action.type) {\n        case ADD_TO_CART:\n            let existingIndex = findProductIndex(state, action.payload.id);\n            if (existingIndex !== -1) {\n                state[existingIndex].units += 1;\n                return state.concat([]);\n            }\n            return state.concat(action.payload);\n\n        case UPDATE_CART_UNITS:\n            let existingItemIndex = findProductIndex(state, action.payload.id);\n\n            if (state[existingItemIndex].units === 0 && action.payload.units === -1) {\n                return [...state.slice(0, existingItemIndex), ...state.slice(existingItemIndex+1)];\n            }\n            state[existingItemIndex].units += action.payload.units;\n            return state.concat([]);\n\n        case DELETE_FROM_CART:\n            let indexToDel = findProductIndex(state, action.payload.id);\n            return [...state.slice(0, indexToDel), ...state.slice(indexToDel+1)];\n    }\n\n    function findProductIndex(products, id) {\n        return products.findIndex((p) => p.id === id)\n    }\n\n    return state;\n}"]},"metadata":{},"sourceType":"module"}